# Keybindings {{{
# Change prefix.
set -g  prefix C-h
bind C-h send-prefix
unbind C-b

# Unbind stuff I don't use.
unbind \#  # list-buffers
unbind '$' # command-prompt -I #S "rename-session '%%'"
unbind %   # split-window -h
unbind &   # confirm-before -p "kill-window #W? (y/n)" kill-window
unbind "'" # command-prompt -p index "select-window -t ':%%'"
unbind '"' # split-window -v
unbind (   # switch-client -p
unbind )   # switch-client -n
unbind -   # delete-buffer
unbind =   # choose-buffer
unbind [   # copy-mode
unbind ]   # paste-buffer
unbind ,   #
unbind .   #
unbind H   #
unbind J   #
unbind K   #
unbind L   #
unbind d   # detach-client
unbind f   # command-prompt "find-window '%%'"
unbind n   # next-window
unbind o   # rotate-window -U
unbind p   # previous-window
# unbind q   # display-panes
# unbind r   # refresh-client
# unbind t   # clock-mode
unbind y   #
unbind M-n # next-window -a
unbind M-o # rotate-window -D
unbind Up
unbind Down
unbind Left
unbind Right
unbind M-Up
unbind M-Down
unbind M-Left
unbind M-Right
unbind C-Up
unbind C-Down
unbind C-Left
unbind C-Right


bind F12 source-file ~/.tmux.conf \; display "Reloaded ~/.tmux.conf"

# Command prompt without shift, becase jumping from control to shift is hard.
bind \; command-prompt

# Detach client.
bind D detach-client

# New session.
bind C new-session \; command-prompt "rename-session '%%'"
# Choose session.
bind C-s choose-session
# Rename session.
bind S command-prompt "rename-session '%%'"

# New window.
bind c new-window -c "#{pane_current_path}" \; command-prompt "rename-window '%%'"
# Choose window.
bind C-w choose-window
# Rename window.
bind W command-prompt "rename-window '%%'"
# Move window to other index.
bind m command-prompt "move-window -t '%%'"
# Find window by name.
bind / command-prompt "find-window '%%'"
# Jump to recent window, like Vim.
bind C-^ last-window
# Next urgent window.
bind u next-window -a
# Progressively choose windows.
bind j next-window
bind k previous-window
# Numbers select appropriate windows.
bind 0 select-window -t 0
bind 1 select-window -t 1
bind 2 select-window -t 2
bind 3 select-window -t 3
bind 4 select-window -t 4
bind 5 select-window -t 5
bind 6 select-window -t 6
bind 7 select-window -t 7
bind 8 select-window -t 8
bind 9 select-window -t 9

# Split panes like in Vim.
bind v split-window -h
bind s split-window -v
# Select pane.
bind C-p display-panes
# Select panes with control, because I just used control to issue prefix.
bind C-h select-pane -L
bind C-j select-pane -D
bind C-k select-pane -U
bind C-l select-pane -R
bind -r C-w select-pane -t :.+
# Resize panes with capital direction keys.
bind -r H resize-pane -L 1
bind -r J resize-pane -D 1
bind -r K resize-pane -U 1
bind -r L resize-pane -R 1
bind    Z resize-pane -Z

# Copy mode.
set -wg mode-keys vi
bind y copy-mode
bind p paste-buffer
bind -t vi-copy v begin-selection
bind -t vi-copy y copy-pipe "xsel --input --clipboard"

# Other.
bind M-b set -w monitor-activity
bind M-m set -g mouse-select-pane \; set -g mouse-resize-pane \; set -g mouse-select-window
# }}}

# Options {{{
set -g  default-terminal "screen-256color"
set -wg utf8 on

set -sg escape-time 0
set -sg repeat-time 600

set -g  base-index 1
set -wg pane-base-index 1
set -g  mouse-select-window off
set -g  mouse-select-pane off
set -g  mouse-resize-pane off

set -wg monitor-activity on
set -g  visual-activity off
set -wg automatic-rename off

set -g  bell-action any
set -g  bell-on-alert on

set -g  display-panes-time 3000

set -g status on
set -g status-utf8 on
set -g status-interval 2
set -g window-status-activity-attr bold
set -g message-attr bold

set -g status-left-length 20
# }}}

# Theme {{{
set -g status-fg white
set -g status-bg black
set -g pane-border-fg colour245
set -g pane-active-border-fg colour1
set -g message-fg colour16
set -g message-bg colour221

set -g status-left  '#[fg=black,bg=colour3] #15S:#I.#P '
set -g status-right '#[fg=colour16,bold] #h #[fg=colour245] #(cat /proc/loadavg | cut -d\\  -f-3) #[fg=white]%d %b %R '

set -g window-status-format "#[fg=white,bg=black] #I #W#F "
set -g window-status-current-format "#[fg=colour16,bg=colour39,noreverse,bold] #I #W#F "
# }}}

source $HOME/.local/tmux.conf
